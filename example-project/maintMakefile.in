# $Id$
#
# Maintainers Makefile, a makefile with maintainer rules.
#
# This makefile is only used when --enable-maintainer-mode was passed to
# configure.  The targets in this file are used to generate files that
# might require special tools (or like in the case of nodebug.h,
# need the header files of libcwd to be installed).  These generated
# files are put into the distribution so that ordinairy users don't need
# to generate them.

CPPFLAGS=@CPPFLAGS@

nodebug.h: maintMakefile macrotest.cc debug.h
	g++ -dM -E $(CPPFLAGS) macrotest.cc | sed -e 's/#define \([^ ]*\).*/#undef \1/' > phase1.h
	g++ -dM -E $(CPPFLAGS) -DPHASE2 macrotest.cc 2>/dev/null | egrep -v '(#define __|_H *$$|DEBUG)' | sort > nodebug.h
	rm -f phase1.h

# See the maintMakefile.in in the libcwd distribution for more
# interesting ideas.

